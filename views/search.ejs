<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Admin Tools</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- <link rel="manifest" href="site.webmanifest"> -->
    <link rel="shortcut icon" type="image/x-icon" href="img/circle_logo.png">
    <!-- Place favicon.ico in the root directory -->

    <!-- CSS here -->
    <link rel="stylesheet" href="styles/bootstrap.min.css">
    <link rel="stylesheet" href="styles/owl.carousel.min.css">
    <link rel="stylesheet" href="styles/magnific-popup.css">
    <link rel="stylesheet" href="styles/font-awesome.min.css">
    <link rel="stylesheet" href="styles/themify-icons.css">
    <link rel="stylesheet" href="styles/nice-select.css">
    <link rel="stylesheet" href="styles/flaticon.css">
    <link rel="stylesheet" href="styles/gijgo.css">
    <link rel="stylesheet" href="styles/animate.css">
    <link rel="stylesheet" href="styles/slicknav.css">
    <link rel="stylesheet" href="styles/style.css">
    <!-- <link rel="stylesheet" href="css/responsive.css"> -->
    <style> 
        .dtHorizontalVerticalExampleWrapper {
        max-width: 600px;
        margin: 0 auto;
        }
        #dtHorizontalVerticalExample th, td {
        white-space: nowrap;
        }
        table.dataTable thead .sorting:after,
        table.dataTable thead .sorting:before,
        table.dataTable thead .sorting_asc:after,
        table.dataTable thead .sorting_asc:before,
        table.dataTable thead .sorting_asc_disabled:after,
        table.dataTable thead .sorting_asc_disabled:before,
        table.dataTable thead .sorting_desc:after,
        table.dataTable thead .sorting_desc:before,
        table.dataTable thead .sorting_desc_disabled:after,
        table.dataTable thead .sorting_desc_disabled:before {
        bottom: .5em;
        }

        th {
        position: -webkit-sticky;
        position: sticky;
        top: 0;
        z-index: 2;
        }
    </style>
</head>

<body>
    <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

    <!-- header-start -->
    <header>
        <div class="header-area " style="background-color: rgba(0, 0, 0, 0.5); height: 125px;">
            <div id="sticky-header" class="main-header-area">
                <div class="container-fluid p-0">
                    <div class="row align-items-center no-gutters">
                        <div class="col-xl-5 col-lg-6">
                            <div class="main-menu  d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">
                                        <li><a class="active" href="/">home</a></li>
                                        <li><a href="/dashboard">Dashboard</a></li>
                                        <li><a href="/community">Community</a></li>
                                        <li><a href="contact.html">Contact</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xl-2 col-lg-2">
                            <div class="logo-img">
                                <a href="/">
                                    <img style="width: 100px;" src="img/circle_logo.png" alt="">
                                </a>
                            </div>
                        </div>
                        <div class="col-xl-5 col-lg-4 d-none d-lg-block">
                            <div class="book_room">
                                <div>
                                    <% if (isLoggedIn) { %>
                                        <p style="color: white; font-size: larger; margin-right: 20px; margin-top: 15px;">Welcome, <%= extraData.username %></p>
                                    <% } %>
                                </div>
                                <div class="socail_links">
                                    <ul>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-facebook-square"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-twitter"></i>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#">
                                                <i class="fa fa-instagram"></i>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="book_btn d-none d-lg-block">
                                    <% if (isLoggedIn) { %>
                                        <a style="font-size: large; border-radius: 5px;" class="login" href="/logout">Sign Out</a>
                                    <% } else { %>
                                        <a style="font-size: large; border-radius: 5px;" class="login" href="/login">Admin Log In</a>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- header-end -->

    <!-- table area -->
    <div class="video_area overlay" style="padding-top: 150px; background-color:beige;">
        <div class="card text-center">
            <div class="card-header">
              <h3>Administrator Tools</h3>
            </div>
            <div class="card-body">
                <h5 class="card-title">View, Delete, and Search the database.<br>
                    Give Account Approval to add new Administrators</h5>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Display All</h5>
                                <a class="btn btn-primary text-white" id="displayButton">Display All</a>
                                <div class="input-group" style="display: flex; justify-content: center; align-items: center;">
                                    <div class="form-outline" data-mdb-input-init>
                                      <input type="number" id="recordNumInput" class="form-control" placeholder="Search Record Number" min="0"/>
                                    </div>
                                    <button type="button" class="btn btn-primary" onclick="searchRecord()">
                                        Search
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Account Approval</h5>
                                <a class="btn btn-primary text-white" id="approvalButton" href="/accountmanage">Account Approval</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
        <br><br>
        
        <div id="displayAll" class="table-responsive" style="display: none;">
            <table id="dtHorizontalVerticalExample" class="table table-striped table-bordered table-sm " cellspacing="0"
            width="100%">
                <thead>
                    <tr>
                        <th style="text-align: left;" scope="col">#</th>
                        <th style="text-align: left;" scope="col">Time</th>
                        <th style="text-align: left;" scope="col">City</th>
                        <th style="text-align: left;" scope="col">Age</th>
                        <th style="text-align: left;" scope="col">Gender</th>
                        <th style="text-align: left;" scope="col">Relationship Status</th>
                        <th style="text-align: left;" scope="col">Occupation</th>
                        <th style="text-align: left;" scope="col">Organization(s)</th>
                        <th style="text-align: left;" scope="col">Social Platform(s)</th>
                        <th style="text-align: left;" scope="col">Daily Usage</th>
                        <th style="text-align: left;" scope="col">Usage Without Purpose</th>
                        <th style="text-align: left;" scope="col">Social Media Distraction</th>
                        <th style="text-align: left;" scope="col">Restlessness</th>
                        <th style="text-align: left;" scope="col">Anxiety Level</th>
                        <th style="text-align: left;" scope="col">Ease of Distraction</th>
                        <th style="text-align: left;" scope="col">Negative Social Comparison</th>
                        <th style="text-align: left;" scope="col">Self Validation</th>
                        <th style="text-align: left;" scope="col">Depression Level</th>
                        <th style="text-align: left;" scope="col">Short Attention Span Level</th>
                        <th style="text-align: left;" scope="col">Issues with Sleep</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody style="font-family: Arial; font-size: 9pt;">
                    <% for (let iCount = 0; iCount < personinfo.length; iCount++) { %>
                        <tr>
                        <td scope="row"><%= personinfo[iCount].entry_id %></td>
                        <td><%= personinfo[iCount].time_entry %></td>
                        <td><%= personinfo[iCount].city %></td>
                        <td><%= personinfo[iCount].age %></td>
                        <td><%= personinfo[iCount].gender %></td>
                        <td><%= personinfo[iCount].relationship_status %></td>
                        <td><%= personinfo[iCount].occupation_status %></td>
                        <td><%= personinfo[iCount].concatenated_organizations %></td>
                        <td><%= personinfo[iCount].concatenated_platforms %></td>
                        <td><%= personinfo[iCount].daily_usage %></td>
                        <td><%= personinfo[iCount].no_purpose_usage %></td>
                        <td><%= personinfo[iCount].distracted_by_sm %></td>
                        <td><%= personinfo[iCount].restlessness %></td>
                        <td><%= personinfo[iCount].anxiety_level %></td>
                        <td><%= personinfo[iCount].concetration_difficulty_level %></td>
                        <td><%= personinfo[iCount].negative_comparison %></td>
                        <td><%= personinfo[iCount].self_validation_level %></td>
                        <td><%= personinfo[iCount].depressed_level %></td>
                        <td><%= personinfo[iCount].fluctuation_interest_in_activites %></td>
                        <td><%= personinfo[iCount].sleep_issue_level %></td>
                        <td style="text-align: center;">
                            <form action="/deleteCountry/<%= personinfo[iCount].entry_id %>" method="POST">
                            <button type="submit">Delete</button>
                            </form>
                        </td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
            <div class="card-footer text-body-secondary">
                <% personinfo.length %> Records Found
            </div>
        </div>

        <br><br>
        <div id="displaySearch" class="table-responsive" style="display: none;">
            <table id="dtHorizontalVerticalExample" class="table table-striped table-bordered table-sm " cellspacing="0"
            width="100%">
                <thead>
                    <tr>
                        <th style="text-align: left;" scope="col">#</th>
                        <th style="text-align: left;" scope="col">Time</th>
                        <th style="text-align: left;" scope="col">City</th>
                        <th style="text-align: left;" scope="col">Age</th>
                        <th style="text-align: left;" scope="col">Gender</th>
                        <th style="text-align: left;" scope="col">Relationship Status</th>
                        <th style="text-align: left;" scope="col">Occupation</th>
                        <th style="text-align: left;" scope="col">Organization(s)</th>
                        <th style="text-align: left;" scope="col">Social Platform(s)</th>
                        <th style="text-align: left;" scope="col">Daily Usage</th>
                        <th style="text-align: left;" scope="col">Usage Without Purpose</th>
                        <th style="text-align: left;" scope="col">Social Media Distraction</th>
                        <th style="text-align: left;" scope="col">Restlessness</th>
                        <th style="text-align: left;" scope="col">Anxiety Level</th>
                        <th style="text-align: left;" scope="col">Ease of Distraction</th>
                        <th style="text-align: left;" scope="col">Negative Social Comparison</th>
                        <th style="text-align: left;" scope="col">Self Validation</th>
                        <th style="text-align: left;" scope="col">Depression Level</th>
                        <th style="text-align: left;" scope="col">Short Attention Span Level</th>
                        <th style="text-align: left;" scope="col">Issues with Sleep</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody id="recordSearchBody" style="font-family: Arial; font-size: 9pt;">
                    <tr id="recordDisplayRow">

                    </tr>
                </tbody>
            </table>

        </div>
    </div>
    <!-- video_area_end -->

    <!-- footer -->
    <footer class="footer">
        <div class="footer_top">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                address
                            </h3>
                            <p class="footer_text"> 445 W Center St, Provo <br>
                                Utah USA</p>
                            <a href="#" class="line-button">Get Direction</a>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 col-lg-3">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Contact Us
                            </h3>
                            <p class="footer_text">(801) 852-6000 <br>
                                provotownhall@provo.com</p>
                        </div>
                    </div>
                    <div class="col-xl-2 col-md-6 col-lg-2">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Navigation
                            </h3>
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Rooms</a></li>
                                <li><a href="#">About</a></li>
                                <li><a href="#">News</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-lg-4">
                        <div class="footer_widget">
                            <h3 class="footer_title">
                                Newsletter
                            </h3>
                            <form action="#" class="newsletter_form">
                                <input type="text" placeholder="Enter your mail">
                                <button type="submit">Sign Up</button>
                            </form>
                            <p class="newsletter_text">Subscribe newsletter to get updates</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copy-right_text">
            <div class="container">
                <div class="footer_border"></div>
                <div class="row">
                    <div class="col-xl-8 col-md-7 col-lg-9">
                        <p class="copy_right">
                            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </div>
                    <div class="col-xl-4 col-md-5 col-lg-3">
                        <div class="socail_links">
                            <ul>
                                <li>
                                    <a href="#">
                                        <i class="fa fa-facebook-square"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="fa fa-twitter"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <i class="fa fa-instagram"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- JS here -->
    <script src="scripts/vendor/modernizr-3.5.0.min.js"></script>
    <script src="scripts/vendor/jquery-1.12.4.min.js"></script>
    <script src="scripts/popper.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <script src="scripts/owl.carousel.min.js"></script>
    <script src="scripts/isotope.pkgd.min.js"></script>
    <script src="scripts/ajax-form.js"></script>
    <script src="scripts/waypoints.min.js"></script>
    <script src="scripts/jquery.counterup.min.js"></script>
    <script src="scripts/imagesloaded.pkgd.min.js"></script>
    <script src="scripts/scrollIt.js"></script>
    <script src="scripts/jquery.scrollUp.min.js"></script>
    <script src="scripts/wow.min.js"></script>
    <script src="scripts/nice-select.min.js"></script>
    <script src="scripts/jquery.slicknav.min.js"></script>
    <script src="scripts/jquery.magnific-popup.min.js"></script>
    <script src="scripts/plugins.js"></script>
    <script src="scripts/gijgo.min.js"></script>

    <!--contact js-->
    <script src="scripts/contact.js"></script>
    <script src="scripts/jquery.ajaxchimp.min.js"></script>
    <script src="scripts/jquery.form.js"></script>
    <script src="scripts/jquery.validate.min.js"></script>
    <script src="scripts/mail-script.js"></script>

    <script src="scripts/main.js"></script>
    <script>
        $(document).ready(function () {
            const table = $('#dtHorizontalVerticalExample').DataTable({
            "scrollX": true,
            "scrollY": 200,
            });

            // Add hover event to cells
            $('#dtHorizontalVerticalExample tbody').on('mouseenter', 'td', function () {
            const colIdx = table.cell(this).index().column;
            const rowIdx = table.cell(this).index().row;

            // Display column name and row number in a tooltip
            $(this).attr('title', `Column: ${table.columns(colIdx).header().text()}, Row: ${rowIdx + 1}`);
            });

            $('.dataTables_length').addClass('bs-select');
        });

        $('#datepicker').datepicker({
            iconsLibrary: 'fontawesome',
            icons: {
             rightIcon: '<span class="fa fa-caret-down"></span>'
         }
        });
        $('#datepicker2').datepicker({
            iconsLibrary: 'fontawesome',
            icons: {
             rightIcon: '<span class="fa fa-caret-down"></span>'
         }

        });

        // Convert the data to a JSON string
        let dataString = JSON.stringify(<%- JSON.stringify(personinfo) %>);

        // Store the data in sessionStorage
        sessionStorage.setItem('full_dataset', dataString);

        
        document.getElementById('displayButton').addEventListener('click', function() {
            document.getElementById('displayAll').style.display = 'block';
            document.getElementById('displaySearch').style.display = 'none';
        });
        
        function searchRecord() {
            document.getElementById('displayAll').style.display = 'none';
            document.getElementById('displaySearch').style.display = 'block';
            // Retrieve the object from storage
            let personinfo = JSON.parse(sessionStorage.getItem('full_dataset'));
            //console.log(personinfo);
            
            let recordNum = document.getElementById("recordNumInput").value;
            //console.log(personinfo[recordNum]);
            
            let tr = document.getElementById("recordDisplayRow");
            let td = document.createElement("td"); 
            td.innerHTML = personinfo[recordNum].entry_id;
            tr.appendChild(td);
            let td1 = document.createElement("tr");
            td1.innerHTML = personinfo[recordNum].time_entry;
            tr.appendChild(td1);
            let td2 = document.createElement("td");
            td2.innerHTML = personinfo[recordNum].city;
            tr.appendChild(td2);
            let td3 = document.createElement("td");
            td3.innerHTML = personinfo[recordNum].age;
            tr.appendChild(td3);
            let td4 = document.createElement("td");
            td4.innerHTML = personinfo[recordNum].gender;
            tr.appendChild(td4);
            let td5 = document.createElement("td");
            td5.innerHTML = personinfo[recordNum].relationship_status;
            tr.appendChild(td5);
            let td6 = document.createElement("td");
            td6.innerHTML = personinfo[recordNum].occupation_status;
            tr.appendChild(td6);
            let td7 = document.createElement("td");
            td7.innerHTML = personinfo[recordNum].concatenated_organizations;
            tr.appendChild(td7);
            let td8 = document.createElement("td");
            td8.innerHTML = personinfo[recordNum].concatenated_platforms;
            tr.appendChild(td8);
            let td9 = document.createElement("td");
            td9.innerHTML = personinfo[recordNum].daily_usage;
            tr.appendChild(td9);
            let td10 = document.createElement("td");
            td10.innerHTML = personinfo[recordNum].no_purpose_usage;
            tr.appendChild(td10);
            let td11 = document.createElement("td");
            td11.innerHTML = personinfo[recordNum].distracted_by_sm;
            tr.appendChild(td11);
            let td12 = document.createElement("td");
            td12.innerHTML = personinfo[recordNum].restlessness;
            tr.appendChild(td12);
            let td13 = document.createElement("td");
            td13.innerHTML = personinfo[recordNum].anxiety_level;
            tr.appendChild(td13);
            let td14 = document.createElement("td");
            td14.innerHTML = personinfo[recordNum].concetration_difficulty_level;
            tr.appendChild(td14);
            let td15 = document.createElement("td");
            td15.innerHTML = personinfo[recordNum].negative_comparison;
            tr.appendChild(td15);
            td = document.createElement("td");
            td.innerHTML = personinfo[recordNum].self_validation_level;
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerHTML = personinfo[recordNum].depressed_level;
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerHTML = personinfo[recordNum].fluctuation_interest_in_activites;
            tr.appendChild(td);
            td = document.createElement("td");
            td.innerHTML = personinfo[recordNum].sleep_issue_level;
            tr.appendChild(td);
            

            
        }
    </script>



</body>

</html>